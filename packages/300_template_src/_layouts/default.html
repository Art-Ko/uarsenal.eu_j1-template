---
layout:                                 compress
---

{% capture j1_cache %}

{% comment %}
 # -----------------------------------------------------------------------------
 # ~/_layouts/default.html
 # Liquid (default) layout template for all content-pages
 #
 # Product/Info:
 # https://jekyll.one
 #
 # Copyright (C) 2021 Juergen Adams
 #
 # J1 Template is licensed under the MIT License.
 # See: https://github.com/jekyll-one-org/J1 Template/blob/master/LICENSE
 #
 # -----------------------------------------------------------------------------
 # NOTE:
 #   This is the DEFAULT layout for ALL pages|layouts used by J1 Template.
 # -----------------------------------------------------------------------------
 # NOTE:
 #   Depending on the site configuration, the HTML code generated by
 #   BASE layout will be compressed as a final processing step.
 # -----------------------------------------------------------------------------
 # NOTE:
 #   Do NOT add any CONTENT here. If needed, go for a "next level" layout
 #   that extents the layout BASE by additional data for your specific
 #   needs based on YAML configuration data files.
 # -----------------------------------------------------------------------------
 # Test data:
 #  {{ lanes_collate | debug }}
 # -----------------------------------------------------------------------------
{% endcomment %}

{% comment %} global variables
-------------------------------------------------------------------------------- {% endcomment %}
{% include themes/{{site.template.name}}/procedures/global/set_base_vars_folders.proc %}

{% comment %} liquid procedures
-------------------------------------------------------------------------------- {% endcomment %}
{% capture default_writer %}themes/{{site.template.name}}/procedures/layouts/default_writer.proc{% endcapture %}


{% comment %} process YML config data
================================================================================ {% endcomment %}

{% comment %} initialize global settings
-------------------------------------------------------------------------------- {% endcomment %}
{% assign environment       = site.environment %}
{% assign template_version  = site.version %}
{% assign compress          = site.compress_html.enabled %}
{% assign prettify          = data.j1_config.prettify %}

{% comment %} Set config files
-------------------------------------------------------------------------------- {% endcomment %}
{% assign template_config   = site.data.j1_config %}
{% assign blocks            = site.data.blocks %}
{% assign modules           = site.data.modules %}

{% comment %} Set config data
-------------------------------------------------------------------------------- {% endcomment %}
{% assign cookiebar_settings  = modules.cookiebar.settings %}
{% assign cookiebar_defaults  = modules.defaults.cookiebar.defaults %}

{% comment %} Webhooks disabled
--------------------------------------------------------------------------------
{% assign webhook_defaults    = modules.defaults.webhooks.defaults %}
{% assign webhook_settings    = modules.webhooks.settings %}
-------------------------------------------------------------------------------- {% endcomment %}

{% comment %} Set config options
-------------------------------------------------------------------------------- {% endcomment %}
{% assign cookiebar_options   = cookiebar_defaults | merge: cookiebar_settings %}
{% assign tooltips_options    = template_config.bootstrap.tooltips %}
{% assign popovers_options    = template_config.bootstrap.popovers %}

{% comment %} Webhooks disabled
--------------------------------------------------------------------------------
{% assign webhook_options     = webhook_defaults | merge: webhook_settings %}
-------------------------------------------------------------------------------- {% endcomment %}

{% assign lanes_collate     = data.layouts.default.lanes %}
{% assign logon_client      = data.modules.j1_sign_in_up %}
{% assign body_scrollbar    = data.j1_config.body.scrollbar %}

{% if page.scrollbar %}
  {% assign body_scrollbar = page.scrollbar %}
{% endif %}


{% comment %} main
-------------------------------------------------------------------------------- {% endcomment %}
<!DOCTYPE {{ site.doctype }}>
<html lang="{{ site.language }}">

{% comment %} additional debug data
-------------------------------------------------------------------------------- {% endcomment %}
{% if page.debug %}
<!-- [DEBUG  ] [j1.layout.default.html                ] [ layout data to be loaded: {{lanes_collate}} ] -->
{% endif %}

<!-- [INFO   ] [j1.layout.default.html                ] [ page generated: {{site.time}} ] -->
<!-- [INFO   ] [j1.layout.default.html                ] [ environment detected as: {{environment}} ] -->

  {% comment %} collect the head section (region head)
  ------------------------------------------------------------------------------ {% endcomment %}
  <head data-proofer-ignore>
    {% comment %}
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-LRlmVvLKVApDVGuspQFnRQJjkv0P7/YFrw84YYQtmYG4nK8c+M+NlmYDCv0rKWpG" crossorigin="anonymous">
    {% endcomment %}
    <!-- [INFO   ] [j1.layout.default.html                ] [ call default_writer for region: 'head' ] -->
    {% include {{default_writer}} region='head' items=lanes_collate %}
    <!-- [INFO   ] [j1.layout.default.html                ] [ end default_writer for region: 'head' ] -->
  </head>

  {% comment %} collect the body section (region body-*)
  ------------------------------------------------------------------------------
  {% if body_scrollbar %}
    <body>
  {% else %}
    <body class="hide-scrollbar">
  {% endif %}
  ------------------------------------------------------------------------------
  {% endcomment %}

  <body>

  {% comment %} wrapper to prevent "DOM flicker"
  ------------------------------------------------------------------------------ {% endcomment %}
    <!-- [INFO   ] [j1.layout.default.html                ] [ start page processing for region: 'body' ] -->
    <!-- [INFO   ] [j1.layout.default.html                ] [ place wrapper to prevent "DOM flicker" ] -->
    <!-- [INFO   ] [j1.layout.default.html                ] [ make page hidden ] -->
    <!-- div id="no_flicker" class="nojs" -->
    <div id="no_flicker" style="display: none">

      {% comment %} collect the BODY-NAVIGATION region
      -------------------------------------------------------------------------- {% endcomment %}
      <!-- [INFO   ] [j1.layout.default.html                ] [ call default_writer for region: 'body-navigation' ] -->
      {% include  {{default_writer}} region='body-navigation' items=lanes_collate %}
      <!-- [INFO   ] [j1.layout.default.html                ] [ end processing default_writer for region: 'body-navigation' ] -->

      {% comment %} inherit CONTENT from other LAYOUTS
      -------------------------------------------------------------------------- {% endcomment %}
      <!-- [INFO   ] [j1.layout.default.html                ] [ place content inherited by layout: {{ page.layout}} ] -->
      {{ content }}
      <!-- [INFO   ] [j1.layout.default.html                ] [ end content inherited by layout: {{ page.layout}} ] -->

      {% comment %} collect the BODY-FOOTER region
      -------------------------------------------------------------------------- {% endcomment %}
      <!-- [INFO   ] [j1.layout.default.html                ] [ call default_writer for region: 'body-footer' ] -->
      {% include  {{default_writer}} region='body-footer' items=lanes_collate %}
      <!-- [INFO   ] [j1.layout.default.html                ] [ end content_writer default_writer for region: 'body-footer' ] -->

    </div>
    <!-- [INFO   ] [j1.layout.default.html                ] [ end default writer] -->

  </body>

  {% comment %} Place|Initialize module components
  ------------------------------------------------------------------------------ {% endcomment %}

  {% comment %} Place container for Cookiebar modals
  ------------------------------------------------------------------------------ {% endcomment %}
  {% if cookiebar_options.enabled %}
  <!-- [INFO   ] [j1.layout.default.html                ] [ place container for Cookiebar modals ] -->
  <div id="{{cookiebar_options.xhr_container_id}}"></div>
  {% endif %}

  {% comment %} Place container for WebHook modals
  ------------------------------------------------------------------------------ {% endcomment %}
  {% if webhook_options.enabled %}
  <!-- [INFO   ] [j1.layout.default.html                ] [ place container for WebHook Modals ] -->
  <div id="{{webhook_options.xhr_container_id}}"></div>
  {% endif %}

  {% comment %} Place container for R-Text resizer modals (deactivated)
  ------------------------------------------------------------------------------
  <!-- [INFO   ] [j1.layout.default.html                ] [ place container for R-Text resizer modals ] -->
  <div id="rtext_resizer">
    <div class="modal fade right" id="fluidModalRTextResizer" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-side modal-top-right modal-notify modal-success" role="document">
        <!-- Content -->
        <div class="modal-content">
          <!--Header-->
          <div class="modal-header">
            <p class="lead">Text Resizer</p>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <i class="mdi mdi-close mdi-dark mdi-48px"></i>
            </button>
          </div>
          <!-- Body -->
          <div class="modal-body">
            <div class="text align-left">
              <p>
                Change the text size for the main window by the switches from below:
              </p>
            </div>
            <div class="ml-3 mt-5 mb-5">
              <div class="switch">
                <label>
                  <input id="textsize-300" name="textsize-300" type="checkbox" checked>
                  300 - Default Size
                </label>
              </div>
              <div class="switch">
                <label>
                  <input id="textsize-400" name="textsize-400" type="checkbox">
                  400 - Larger Size
                </label>
              </div>
              <div class="switch">
                <label>
                  <input id="textsize-500" name="textsize-500" type="checkbox">
                  500 - Largest Size
                </label>
              </div>
            </div>
          </div>
        <!-- END Content -->
      </div>
    </div>
  </div>
  <!-- [INFO   ] [j1.layout.default.html                ] [ end modals for r-text resizer ] -->
  ------------------------------------------------------------------------------ {% endcomment %}

  {% comment %} JS for R-Text (deactivated)
  ------------------------------------------------------------------------------
  <!-- [INFO   ] [j1.layout.default.html                ] [ place JS for R-Text resizer modals ] -->
  <script>
    // Set global variables
    var environment     = '{{environment}}';
    var logger          = log4javascript.getLogger('j1.template.rtext-resizer');
    var $el             = $("main[class*='r-text']");
    var base_classes    = $("main[class*='r-text']").attr('class').replace(/r-text-[0-9]*/g, '');
    var r_text_default  = ' r-text-300';
    var r_text_larger   = ' r-text-400';
    var r_text_largest  = ' r-text-500';
    var cl;
    var value;

    $('input:checkbox[name="textsize-300"]').on('click', function (e) {
      value = $(this).is(':checked');

      $('input:checkbox[name="textsize-400"]').prop('checked', false);
      $('input:checkbox[name="textsize-500"]').prop('checked', false);

      if (value == true) {
        cl = r_text_default;
      }
      $el.attr('class', base_classes + cl);

      if(environment === 'development') {
        logText = 'Changed textsize to: ' +cl;
        logger.info(logText);
      }
      e.stopPropagation();
    });

    $('input:checkbox[name="textsize-400"]').on('click', function (e) {
      value = $(this).is(':checked');

      $('input:checkbox[name="textsize-300"]').prop('checked', false);
      $('input:checkbox[name="textsize-500"]').prop('checked', false);

      if (value == true) {
        cl = r_text_larger;
      }
      $el.attr('class', base_classes + cl);

      if(environment === 'development') {
        logText = 'Changed textsize to: ' +cl;
        logger.info(logText);
      }
      e.stopPropagation();
    });

    $('input:checkbox[name="textsize-500"]').on('click', function (e) {
      value = $(this).is(':checked');

      $('input:checkbox[name="textsize-300"]').prop('checked', false);
      $('input:checkbox[name="textsize-400"]').prop('checked', false);

      if (value == true) {
        cl = r_text_largest;
      }
      $el.attr('class', base_classes + cl);

      if(environment === 'development') {
        logText = 'Changed textsize to: ' +cl;
        logger.info(logText);
      }
      e.stopPropagation();
    });
  </script>
  <!-- [INFO   ] [j1.layout.default.html                ] [ end JS for r-text resizer ] -->
  ------------------------------------------------------------------------------ {% endcomment %}

  {% comment %} Initialize Tooltips|Popovers
  ------------------------------------------------------------------------------ {% endcomment %}
  <!-- [INFO   ] [j1.layout.default.html                ] [ initialize BS tooltips|popovers ] -->
  <script>
    $(function() {
    {% if tooltips_options.enabled %}
      $('[data-toggle="tooltip"').tooltip({
        trigger: '{{tooltips_options.trigger}}'
      });
    {% endif %}
    {% if popovers_options.enabled %}
      $('[data-toggle="popover"').popover({
        trigger: '{{popovers_options.trigger}}'
      });
    {% endif %}
    });
  </script>

  {% comment %} Initialize Window History (back on <ESC>)
  ------------------------------------------------------------------------------ {% endcomment %}
  <!-- [INFO   ] [j1.layout.default.html                ] [ initialize window.history.back ] -->
  <script>
  // Redirect on KEY <ESC>
  window.onkeyup = function (e)
  {
   if (e.keyCode == 27) window.history.back();
  }
  </script>
  <!-- [INFO   ] [j1.layout.default.html                ] [ end page processing ] -->
</html>

{% endcapture %}


{% comment %} POST processing of the generated page using (captured) cache
-------------------------------------------------------------------------------- {% endcomment %}
{% case environment %}

  {% comment %} DEVELOPMENT mode
  ------------------------------------------------------------------------------ {% endcomment %}
  {% when 'development' or 'dev' or 'test' %}
    {% if prettify %}
      {{ j1_cache  | strip_empty_lines | remove: '<p>excerpt__end</p>' | pretty_print }}
    {% else %}
      {{ j1_cache | strip_empty_lines | remove: '<p>excerpt__end</p>' }}
    {% endif %} {% comment %} END prettify {% endcomment %}


  {% comment %} PRODUCTION mode
  ------------------------------------------------------------------------------ {% endcomment %}
  {% when 'production' or 'prod' %}
    {% unless compress %}
      {% if prettify %}
        {{ j1_cache | remove: '<p>excerpt__end</p>' | strip_html_comments | strip_js_comments | strip_empty_lines | pretty_print }}
      {% else %}
        {{ j1_cache | remove: '<p>excerpt__end</p>' | strip_html_comments | strip_js_comments | strip_empty_lines  }}
      {% endif %} {% comment %} END prettify {% endcomment %}
    {% endunless %} {% comment %} UNLESS compress {% endcomment %}

	{% if compress %}
      {{ j1_cache | remove: '<p>excerpt__end</p>' | strip_html_comments | strip_js_comments | strip_empty_lines  }}
	{% endif %}

  {% comment %} UNKNOWN mode
  ------------------------------------------------------------------------------ {% endcomment %}
  {% else %}
    {{ j1_cache | remove: '<p>excerpt__end</p>'| strip_empty_lines  }}

{% endcase %}
