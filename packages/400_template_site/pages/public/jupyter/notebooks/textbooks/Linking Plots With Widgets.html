  <div class="cell text_cell">
    <button class="js-nbinteract-widget">
      Loading widgets...
    </button>
  </div>



<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Building-interactive-plots-using-bqplot-and-ipywidgets">Building interactive plots using <code>bqplot</code> and <code>ipywidgets</code><a class="anchor-link" href="#Building-interactive-plots-using-bqplot-and-ipywidgets">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><code>bqplot</code> is built on top of the <code>ipywidgets</code> framework</li>
<li><code>ipwidgets</code> and <code>bqplot</code> widgets can be seamlessly integrated to build interactive plots</li>
<li><code>bqplot</code> figure widgets can be stacked with UI controls available in <code>ipywidgets</code> by using <code>Layout</code> classes (Box, HBox, VBox) in <code>ipywidgets</code>
(Note that <em>only</em> <code>Figure</code> objects (not <code>Mark</code> objects) inherit from <code>DOMWidget</code> class and can be combined with other widgets from <code>ipywidgets</code>)</li>
<li>Trait attributes of widgets can be linked using callbacks. Callbacks should be registered using the <code>observe</code> method</li>
</ul>
<p>Please follow these links for detailed documentation on:</p>
<ol>
<li><a href="https://ipywidgets.readthedocs.io/en/stable/examples/Widget%20Styling.html">Layout and Styling of Jupyter Widgets</a></li>
</ol>
<ul>
<li><a href="https://ipywidgets.readthedocs.io/en/stable/examples/Widget%20Events.html">Linking Widgets</a></li>
</ul>
<p><br>Let's look at examples of linking plots with UI controls</p>

</div>
</div>
</div>

  

  <div class="
      cell border-box-sizing code_cell rendered">
    <div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>

    </div>
</div>
</div>

  </div>

  

  <div class="
      cell border-box-sizing code_cell rendered">
    <div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>
<span class="kn">import</span> <span class="nn">bqplot.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>

    </div>
</div>
</div>

  </div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Update the plot on a button click</p>

</div>
</div>
</div>

  

  <div class="
      cell border-box-sizing code_cell rendered">
    <div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>  <span class="c1"># simple random walk</span>

<span class="c1"># create a button</span>
<span class="n">update_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Update&quot;</span><span class="p">,</span> <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;success&quot;</span><span class="p">)</span>

<span class="c1"># create a figure widget</span>
<span class="n">fig1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">animation_duration</span><span class="o">=</span><span class="mi">750</span><span class="p">)</span>
<span class="n">line</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># define an on_click function</span>
<span class="k">def</span> <span class="nf">on_btn_click</span><span class="p">(</span><span class="n">btn</span><span class="p">):</span>
    <span class="c1"># update the y attribute of line mark</span>
    <span class="n">line</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>  <span class="c1"># another random walk</span>


<span class="c1"># register the on_click function</span>
<span class="n">update_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_btn_click</span><span class="p">)</span>

<span class="c1"># stack button and figure using VBox</span>
<span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">([</span><span class="n">fig1</span><span class="p">,</span> <span class="n">update_btn</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    



  <div class="output_subarea output_widget_view ">
    <button class="js-nbinteract-widget">
      Loading widgets...
    </button>
  </div>

</div>

</div>
</div>

  </div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's look at an example where we link a plot to a dropdown menu</p>

</div>
</div>
</div>

  

  <div class="
      cell border-box-sizing code_cell rendered">
    <div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># create a dummy time series for 5 dummy stock tickers</span>
<span class="n">dates</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s2">&quot;20180101&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;20181231&quot;</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dates</span><span class="p">)</span>
<span class="n">tickers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&quot;ABCDE&quot;</span><span class="p">)</span>
<span class="n">prices</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">tickers</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

  </div>

  

  <div class="
      cell border-box-sizing code_cell rendered">
    <div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># create a dropdown menu for tickers</span>
<span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Ticker&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">tickers</span><span class="p">)</span>

<span class="c1"># create figure for plotting time series</span>
<span class="n">current_ticker</span> <span class="o">=</span> <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span>
<span class="n">fig_title_tmpl</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">{}</span><span class="s1">&quot; Time Series&#39;</span>  <span class="c1"># string template for title of the figure</span>
<span class="n">fig2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">fig_title_tmpl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">current_ticker</span><span class="p">))</span>
<span class="n">fig2</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">&quot;900px&quot;</span>
<span class="n">time_series</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span> <span class="n">prices</span><span class="p">[</span><span class="n">current_ticker</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Price&quot;</span><span class="p">)</span>

<span class="c1"># 1. create a callback which updates the plot when dropdown item is selected</span>
<span class="k">def</span> <span class="nf">update_plot</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">selected_ticker</span> <span class="o">=</span> <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span>

    <span class="c1"># update the y attribute of the mark by selecting</span>
    <span class="c1"># the column from the price data frame</span>
    <span class="n">time_series</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="n">selected_ticker</span><span class="p">]</span>

    <span class="c1"># update the title of the figure</span>
    <span class="n">fig2</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">fig_title_tmpl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">selected_ticker</span><span class="p">)</span>


<span class="c1"># 2. register the callback by using the &#39;observe&#39; method</span>
<span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_plot</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

<span class="c1"># stack the dropdown and fig widgets using VBox</span>
<span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">([</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">fig2</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    



  <div class="output_subarea output_widget_view ">
    <button class="js-nbinteract-widget">
      Loading widgets...
    </button>
  </div>

</div>

<div class="output_area">

    

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">ValueError</span>                                Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\ipywidgets\widgets\widget.py</span> in <span class="ansi-cyan-fg">_handle_msg</span><span class="ansi-blue-intense-fg ansi-bold">(self, msg)</span>
<span class="ansi-green-fg">    754</span>                 <span class="ansi-green-intense-fg ansi-bold">if</span> <span class="ansi-blue-intense-fg ansi-bold">&#39;buffer_paths&#39;</span> <span class="ansi-green-intense-fg ansi-bold">in</span> data<span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">    755</span>                     _put_buffers<span class="ansi-yellow-intense-fg ansi-bold">(</span>state<span class="ansi-yellow-intense-fg ansi-bold">,</span> data<span class="ansi-yellow-intense-fg ansi-bold">[</span><span class="ansi-blue-intense-fg ansi-bold">&#39;buffer_paths&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> msg<span class="ansi-yellow-intense-fg ansi-bold">[</span><span class="ansi-blue-intense-fg ansi-bold">&#39;buffers&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 756</span><span class="ansi-yellow-intense-fg ansi-bold">                 </span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>set_state<span class="ansi-yellow-intense-fg ansi-bold">(</span>state<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    757</span> 
<span class="ansi-green-fg">    758</span>         <span class="ansi-red-intense-fg ansi-bold"># Handle a state request.</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\ipywidgets\widgets\widget.py</span> in <span class="ansi-cyan-fg">set_state</span><span class="ansi-blue-intense-fg ansi-bold">(self, sync_data)</span>
<span class="ansi-green-fg">    623</span>                     from_json = self.trait_metadata(name, &#39;from_json&#39;,
<span class="ansi-green-fg">    624</span>                                                     self._trait_from_json)
<span class="ansi-green-intense-fg ansi-bold">--&gt; 625</span><span class="ansi-yellow-intense-fg ansi-bold">                     </span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>set_trait<span class="ansi-yellow-intense-fg ansi-bold">(</span>name<span class="ansi-yellow-intense-fg ansi-bold">,</span> from_json<span class="ansi-yellow-intense-fg ansi-bold">(</span>sync_data<span class="ansi-yellow-intense-fg ansi-bold">[</span>name<span class="ansi-yellow-intense-fg ansi-bold">]</span><span class="ansi-yellow-intense-fg ansi-bold">,</span> self<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    626</span> 
<span class="ansi-green-fg">    627</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> send<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> content<span class="ansi-yellow-intense-fg ansi-bold">,</span> buffers<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-green-intense-fg ansi-bold">None</span><span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\contextlib.py</span> in <span class="ansi-cyan-fg">__exit__</span><span class="ansi-blue-intense-fg ansi-bold">(self, type, value, traceback)</span>
<span class="ansi-green-fg">    117</span>         <span class="ansi-green-intense-fg ansi-bold">if</span> type <span class="ansi-green-intense-fg ansi-bold">is</span> <span class="ansi-green-intense-fg ansi-bold">None</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">    118</span>             <span class="ansi-green-intense-fg ansi-bold">try</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 119</span><span class="ansi-yellow-intense-fg ansi-bold">                 </span>next<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>gen<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    120</span>             <span class="ansi-green-intense-fg ansi-bold">except</span> StopIteration<span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">    121</span>                 <span class="ansi-green-intense-fg ansi-bold">return</span> <span class="ansi-green-intense-fg ansi-bold">False</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\traitlets\traitlets.py</span> in <span class="ansi-cyan-fg">hold_trait_notifications</span><span class="ansi-blue-intense-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">   1369</span>                 <span class="ansi-green-intense-fg ansi-bold">for</span> changes <span class="ansi-green-intense-fg ansi-bold">in</span> cache<span class="ansi-yellow-intense-fg ansi-bold">.</span>values<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">   1370</span>                     <span class="ansi-green-intense-fg ansi-bold">for</span> change <span class="ansi-green-intense-fg ansi-bold">in</span> changes<span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">-&gt; 1371</span><span class="ansi-yellow-intense-fg ansi-bold">                         </span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>notify_change<span class="ansi-yellow-intense-fg ansi-bold">(</span>change<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   1372</span> 
<span class="ansi-green-fg">   1373</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> _notify_trait<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> name<span class="ansi-yellow-intense-fg ansi-bold">,</span> old_value<span class="ansi-yellow-intense-fg ansi-bold">,</span> new_value<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\ipywidgets\widgets\widget.py</span> in <span class="ansi-cyan-fg">notify_change</span><span class="ansi-blue-intense-fg ansi-bold">(self, change)</span>
<span class="ansi-green-fg">    684</span>                 <span class="ansi-red-intense-fg ansi-bold"># Send new state to front-end</span>
<span class="ansi-green-fg">    685</span>                 self<span class="ansi-yellow-intense-fg ansi-bold">.</span>send_state<span class="ansi-yellow-intense-fg ansi-bold">(</span>key<span class="ansi-yellow-intense-fg ansi-bold">=</span>name<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 686</span><span class="ansi-yellow-intense-fg ansi-bold">         </span>super<span class="ansi-yellow-intense-fg ansi-bold">(</span>Widget<span class="ansi-yellow-intense-fg ansi-bold">,</span> self<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>notify_change<span class="ansi-yellow-intense-fg ansi-bold">(</span>change<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    687</span> 
<span class="ansi-green-fg">    688</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> __repr__<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\traitlets\traitlets.py</span> in <span class="ansi-cyan-fg">notify_change</span><span class="ansi-blue-intense-fg ansi-bold">(self, change)</span>
<span class="ansi-green-fg">   1384</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> notify_change<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> change<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">   1385</span>         <span class="ansi-blue-intense-fg ansi-bold">&#34;&#34;&#34;Notify observers of a change event&#34;&#34;&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">-&gt; 1386</span><span class="ansi-yellow-intense-fg ansi-bold">         </span><span class="ansi-green-intense-fg ansi-bold">return</span> self<span class="ansi-yellow-intense-fg ansi-bold">.</span>_notify_observers<span class="ansi-yellow-intense-fg ansi-bold">(</span>change<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   1387</span> 
<span class="ansi-green-fg">   1388</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> _notify_observers<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> event<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\traitlets\traitlets.py</span> in <span class="ansi-cyan-fg">_notify_observers</span><span class="ansi-blue-intense-fg ansi-bold">(self, event)</span>
<span class="ansi-green-fg">   1429</span>                 c <span class="ansi-yellow-intense-fg ansi-bold">=</span> getattr<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> c<span class="ansi-yellow-intense-fg ansi-bold">.</span>name<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   1430</span> 
<span class="ansi-green-intense-fg ansi-bold">-&gt; 1431</span><span class="ansi-yellow-intense-fg ansi-bold">             </span>c<span class="ansi-yellow-intense-fg ansi-bold">(</span>event<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   1432</span> 
<span class="ansi-green-fg">   1433</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> _add_notifiers<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> handler<span class="ansi-yellow-intense-fg ansi-bold">,</span> name<span class="ansi-yellow-intense-fg ansi-bold">,</span> type<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\ipywidgets\widgets\widget_selection.py</span> in <span class="ansi-cyan-fg">_propagate_index</span><span class="ansi-blue-intense-fg ansi-bold">(self, change)</span>
<span class="ansi-green-fg">    233</span>             self<span class="ansi-yellow-intense-fg ansi-bold">.</span>label <span class="ansi-yellow-intense-fg ansi-bold">=</span> label
<span class="ansi-green-fg">    234</span>         <span class="ansi-green-intense-fg ansi-bold">if</span> self<span class="ansi-yellow-intense-fg ansi-bold">.</span>value <span class="ansi-green-intense-fg ansi-bold">is</span> <span class="ansi-green-intense-fg ansi-bold">not</span> value<span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 235</span><span class="ansi-yellow-intense-fg ansi-bold">             </span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>value <span class="ansi-yellow-intense-fg ansi-bold">=</span> value
<span class="ansi-green-fg">    236</span> 
<span class="ansi-green-fg">    237</span>     <span class="ansi-yellow-intense-fg ansi-bold">@</span>validate<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-blue-intense-fg ansi-bold">&#39;value&#39;</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\traitlets\traitlets.py</span> in <span class="ansi-cyan-fg">__set__</span><span class="ansi-blue-intense-fg ansi-bold">(self, obj, value)</span>
<span class="ansi-green-fg">    713</span>             <span class="ansi-green-intense-fg ansi-bold">raise</span> TraitError<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-blue-intense-fg ansi-bold">&#39;The &#34;%s&#34; trait is read-only.&#39;</span> <span class="ansi-yellow-intense-fg ansi-bold">%</span> self<span class="ansi-yellow-intense-fg ansi-bold">.</span>name<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    714</span>         <span class="ansi-green-intense-fg ansi-bold">else</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 715</span><span class="ansi-yellow-intense-fg ansi-bold">             </span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>set<span class="ansi-yellow-intense-fg ansi-bold">(</span>obj<span class="ansi-yellow-intense-fg ansi-bold">,</span> value<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    716</span> 
<span class="ansi-green-fg">    717</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> _validate<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> obj<span class="ansi-yellow-intense-fg ansi-bold">,</span> value<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\traitlets\traitlets.py</span> in <span class="ansi-cyan-fg">set</span><span class="ansi-blue-intense-fg ansi-bold">(self, obj, value)</span>
<span class="ansi-green-fg">    702</span>             <span class="ansi-red-intense-fg ansi-bold"># we explicitly compare silent to True just in case the equality</span>
<span class="ansi-green-fg">    703</span>             <span class="ansi-red-intense-fg ansi-bold"># comparison above returns something other than True/False</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 704</span><span class="ansi-yellow-intense-fg ansi-bold">             </span>obj<span class="ansi-yellow-intense-fg ansi-bold">.</span>_notify_trait<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">.</span>name<span class="ansi-yellow-intense-fg ansi-bold">,</span> old_value<span class="ansi-yellow-intense-fg ansi-bold">,</span> new_value<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    705</span> 
<span class="ansi-green-fg">    706</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> __set__<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> obj<span class="ansi-yellow-intense-fg ansi-bold">,</span> value<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\traitlets\traitlets.py</span> in <span class="ansi-cyan-fg">_notify_trait</span><span class="ansi-blue-intense-fg ansi-bold">(self, name, old_value, new_value)</span>
<span class="ansi-green-fg">   1378</span>                 new<span class="ansi-yellow-intense-fg ansi-bold">=</span>new_value<span class="ansi-yellow-intense-fg ansi-bold">,</span>
<span class="ansi-green-fg">   1379</span>                 owner<span class="ansi-yellow-intense-fg ansi-bold">=</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span>
<span class="ansi-green-intense-fg ansi-bold">-&gt; 1380</span><span class="ansi-yellow-intense-fg ansi-bold">                 </span>type<span class="ansi-yellow-intense-fg ansi-bold">=</span><span class="ansi-blue-intense-fg ansi-bold">&#34;change&#34;</span><span class="ansi-yellow-intense-fg ansi-bold">,</span>
<span class="ansi-green-fg">   1381</span>             )
<span class="ansi-green-fg">   1382</span>         )

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\ipywidgets\widgets\widget.py</span> in <span class="ansi-cyan-fg">notify_change</span><span class="ansi-blue-intense-fg ansi-bold">(self, change)</span>
<span class="ansi-green-fg">    684</span>                 <span class="ansi-red-intense-fg ansi-bold"># Send new state to front-end</span>
<span class="ansi-green-fg">    685</span>                 self<span class="ansi-yellow-intense-fg ansi-bold">.</span>send_state<span class="ansi-yellow-intense-fg ansi-bold">(</span>key<span class="ansi-yellow-intense-fg ansi-bold">=</span>name<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-intense-fg ansi-bold">--&gt; 686</span><span class="ansi-yellow-intense-fg ansi-bold">         </span>super<span class="ansi-yellow-intense-fg ansi-bold">(</span>Widget<span class="ansi-yellow-intense-fg ansi-bold">,</span> self<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>notify_change<span class="ansi-yellow-intense-fg ansi-bold">(</span>change<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    687</span> 
<span class="ansi-green-fg">    688</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> __repr__<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\traitlets\traitlets.py</span> in <span class="ansi-cyan-fg">notify_change</span><span class="ansi-blue-intense-fg ansi-bold">(self, change)</span>
<span class="ansi-green-fg">   1384</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> notify_change<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> change<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">   1385</span>         <span class="ansi-blue-intense-fg ansi-bold">&#34;&#34;&#34;Notify observers of a change event&#34;&#34;&#34;</span>
<span class="ansi-green-intense-fg ansi-bold">-&gt; 1386</span><span class="ansi-yellow-intense-fg ansi-bold">         </span><span class="ansi-green-intense-fg ansi-bold">return</span> self<span class="ansi-yellow-intense-fg ansi-bold">.</span>_notify_observers<span class="ansi-yellow-intense-fg ansi-bold">(</span>change<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   1387</span> 
<span class="ansi-green-fg">   1388</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> _notify_observers<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> event<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\traitlets\traitlets.py</span> in <span class="ansi-cyan-fg">_notify_observers</span><span class="ansi-blue-intense-fg ansi-bold">(self, event)</span>
<span class="ansi-green-fg">   1429</span>                 c <span class="ansi-yellow-intense-fg ansi-bold">=</span> getattr<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> c<span class="ansi-yellow-intense-fg ansi-bold">.</span>name<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   1430</span> 
<span class="ansi-green-intense-fg ansi-bold">-&gt; 1431</span><span class="ansi-yellow-intense-fg ansi-bold">             </span>c<span class="ansi-yellow-intense-fg ansi-bold">(</span>event<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   1432</span> 
<span class="ansi-green-fg">   1433</span>     <span class="ansi-green-intense-fg ansi-bold">def</span> _add_notifiers<span class="ansi-yellow-intense-fg ansi-bold">(</span>self<span class="ansi-yellow-intense-fg ansi-bold">,</span> handler<span class="ansi-yellow-intense-fg ansi-bold">,</span> name<span class="ansi-yellow-intense-fg ansi-bold">,</span> type<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>

<span class="ansi-green-intense-fg ansi-bold">~\AppData\Local\Temp/ipykernel_6072/855058391.py</span> in <span class="ansi-cyan-fg">update_plot</span><span class="ansi-blue-intense-fg ansi-bold">(*args)</span>
<span class="ansi-green-fg">     17</span>     <span class="ansi-red-intense-fg ansi-bold"># update the y attribute of the mark by selecting</span>
<span class="ansi-green-fg">     18</span>     <span class="ansi-red-intense-fg ansi-bold"># the column from the price data frame</span>
<span class="ansi-green-intense-fg ansi-bold">---&gt; 19</span><span class="ansi-yellow-intense-fg ansi-bold">     </span>time_series<span class="ansi-yellow-intense-fg ansi-bold">.</span>y <span class="ansi-yellow-intense-fg ansi-bold">=</span> prices<span class="ansi-yellow-intense-fg ansi-bold">[</span>selected_ticker<span class="ansi-yellow-intense-fg ansi-bold">]</span>
<span class="ansi-green-fg">     20</span> 
<span class="ansi-green-fg">     21</span>     <span class="ansi-red-intense-fg ansi-bold"># update the title of the figure</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\pandas\core\frame.py</span> in <span class="ansi-cyan-fg">__getitem__</span><span class="ansi-blue-intense-fg ansi-bold">(self, key)</span>
<span class="ansi-green-fg">   3443</span>         <span class="ansi-red-intense-fg ansi-bold"># Do we have a (boolean) DataFrame?</span>
<span class="ansi-green-fg">   3444</span>         <span class="ansi-green-intense-fg ansi-bold">if</span> isinstance<span class="ansi-yellow-intense-fg ansi-bold">(</span>key<span class="ansi-yellow-intense-fg ansi-bold">,</span> DataFrame<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">-&gt; 3445</span><span class="ansi-yellow-intense-fg ansi-bold">             </span><span class="ansi-green-intense-fg ansi-bold">return</span> self<span class="ansi-yellow-intense-fg ansi-bold">.</span>where<span class="ansi-yellow-intense-fg ansi-bold">(</span>key<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   3446</span> 
<span class="ansi-green-fg">   3447</span>         <span class="ansi-red-intense-fg ansi-bold"># Do we have a (boolean) 1d indexer?</span>

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\pandas\util\_decorators.py</span> in <span class="ansi-cyan-fg">wrapper</span><span class="ansi-blue-intense-fg ansi-bold">(*args, **kwargs)</span>
<span class="ansi-green-fg">    309</span>                     stacklevel<span class="ansi-yellow-intense-fg ansi-bold">=</span>stacklevel<span class="ansi-yellow-intense-fg ansi-bold">,</span>
<span class="ansi-green-fg">    310</span>                 )
<span class="ansi-green-intense-fg ansi-bold">--&gt; 311</span><span class="ansi-yellow-intense-fg ansi-bold">             </span><span class="ansi-green-intense-fg ansi-bold">return</span> func<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">*</span>args<span class="ansi-yellow-intense-fg ansi-bold">,</span> <span class="ansi-yellow-intense-fg ansi-bold">**</span>kwargs<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">    312</span> 
<span class="ansi-green-fg">    313</span>         <span class="ansi-green-intense-fg ansi-bold">return</span> wrapper

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\pandas\core\frame.py</span> in <span class="ansi-cyan-fg">where</span><span class="ansi-blue-intense-fg ansi-bold">(self, cond, other, inplace, axis, level, errors, try_cast)</span>
<span class="ansi-green-fg">  10734</span>         try_cast<span class="ansi-yellow-intense-fg ansi-bold">=</span>lib<span class="ansi-yellow-intense-fg ansi-bold">.</span>no_default<span class="ansi-yellow-intense-fg ansi-bold">,</span>
<span class="ansi-green-fg">  10735</span>     ):
<span class="ansi-green-intense-fg ansi-bold">&gt; 10736</span><span class="ansi-yellow-intense-fg ansi-bold">         </span><span class="ansi-green-intense-fg ansi-bold">return</span> super<span class="ansi-yellow-intense-fg ansi-bold">(</span><span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">.</span>where<span class="ansi-yellow-intense-fg ansi-bold">(</span>cond<span class="ansi-yellow-intense-fg ansi-bold">,</span> other<span class="ansi-yellow-intense-fg ansi-bold">,</span> inplace<span class="ansi-yellow-intense-fg ansi-bold">,</span> axis<span class="ansi-yellow-intense-fg ansi-bold">,</span> level<span class="ansi-yellow-intense-fg ansi-bold">,</span> errors<span class="ansi-yellow-intense-fg ansi-bold">,</span> try_cast<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">  10737</span> 
<span class="ansi-green-fg">  10738</span>     @deprecate_nonkeyword_arguments(

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\pandas\core\generic.py</span> in <span class="ansi-cyan-fg">where</span><span class="ansi-blue-intense-fg ansi-bold">(self, cond, other, inplace, axis, level, errors, try_cast)</span>
<span class="ansi-green-fg">   9030</span>             )
<span class="ansi-green-fg">   9031</span> 
<span class="ansi-green-intense-fg ansi-bold">-&gt; 9032</span><span class="ansi-yellow-intense-fg ansi-bold">         </span><span class="ansi-green-intense-fg ansi-bold">return</span> self<span class="ansi-yellow-intense-fg ansi-bold">.</span>_where<span class="ansi-yellow-intense-fg ansi-bold">(</span>cond<span class="ansi-yellow-intense-fg ansi-bold">,</span> other<span class="ansi-yellow-intense-fg ansi-bold">,</span> inplace<span class="ansi-yellow-intense-fg ansi-bold">,</span> axis<span class="ansi-yellow-intense-fg ansi-bold">,</span> level<span class="ansi-yellow-intense-fg ansi-bold">,</span> errors<span class="ansi-yellow-intense-fg ansi-bold">=</span>errors<span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   9033</span> 
<span class="ansi-green-fg">   9034</span>     <span class="ansi-yellow-intense-fg ansi-bold">@</span>final

<span class="ansi-green-intense-fg ansi-bold">c:\devtools\python\lib\site-packages\pandas\core\generic.py</span> in <span class="ansi-cyan-fg">_where</span><span class="ansi-blue-intense-fg ansi-bold">(self, cond, other, inplace, axis, level, errors)</span>
<span class="ansi-green-fg">   8786</span>                 <span class="ansi-green-intense-fg ansi-bold">for</span> dt <span class="ansi-green-intense-fg ansi-bold">in</span> cond<span class="ansi-yellow-intense-fg ansi-bold">.</span>dtypes<span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">   8787</span>                     <span class="ansi-green-intense-fg ansi-bold">if</span> <span class="ansi-green-intense-fg ansi-bold">not</span> is_bool_dtype<span class="ansi-yellow-intense-fg ansi-bold">(</span>dt<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-intense-fg ansi-bold">-&gt; 8788</span><span class="ansi-yellow-intense-fg ansi-bold">                         </span><span class="ansi-green-intense-fg ansi-bold">raise</span> ValueError<span class="ansi-yellow-intense-fg ansi-bold">(</span>msg<span class="ansi-yellow-intense-fg ansi-bold">.</span>format<span class="ansi-yellow-intense-fg ansi-bold">(</span>dtype<span class="ansi-yellow-intense-fg ansi-bold">=</span>dt<span class="ansi-yellow-intense-fg ansi-bold">)</span><span class="ansi-yellow-intense-fg ansi-bold">)</span>
<span class="ansi-green-fg">   8789</span>         <span class="ansi-green-intense-fg ansi-bold">else</span><span class="ansi-yellow-intense-fg ansi-bold">:</span>
<span class="ansi-green-fg">   8790</span>             <span class="ansi-red-intense-fg ansi-bold"># GH#21947 we have an empty DataFrame/Series, could be object-dtype</span>

<span class="ansi-red-intense-fg ansi-bold">ValueError</span>: Boolean array expected for the condition, not float64</pre>
</div>
</div>

</div>
</div>

  </div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's now create a scatter plot where we select X and Y data from the two dropdown menus</p>

</div>
</div>
</div>

  

  <div class="
      cell border-box-sizing code_cell rendered">
    <div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># create two dropdown menus for X and Y attributes of scatter</span>
<span class="n">x_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">tickers</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
<span class="n">y_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">tickers</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>

<span class="c1"># create figure for plotting the scatter</span>
<span class="n">x_ticker</span> <span class="o">=</span> <span class="n">x_dropdown</span><span class="o">.</span><span class="n">value</span>
<span class="n">y_ticker</span> <span class="o">=</span> <span class="n">y_dropdown</span><span class="o">.</span><span class="n">value</span>

<span class="c1"># set up fig_margin to allow space to display color bar</span>
<span class="n">fig_margin</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="n">fig3</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">animation_duration</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">fig_margin</span><span class="o">=</span><span class="n">fig_margin</span><span class="p">)</span>

<span class="c1"># custom axis options for color data</span>
<span class="n">axes_options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;tick_format&quot;</span><span class="p">:</span> <span class="s2">&quot;%m/%y&quot;</span><span class="p">,</span> <span class="s2">&quot;side&quot;</span><span class="p">:</span> <span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="s2">&quot;num_ticks&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}}</span>
<span class="n">scatter</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">prices</span><span class="p">[</span><span class="n">x_ticker</span><span class="p">],</span>
    <span class="n">y</span><span class="o">=</span><span class="n">prices</span><span class="p">[</span><span class="n">y_ticker</span><span class="p">],</span>
    <span class="n">color</span><span class="o">=</span><span class="n">dates</span><span class="p">,</span>  <span class="c1"># represent chronology using color scale</span>
    <span class="n">stroke</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">],</span>
    <span class="n">default_size</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span>
    <span class="n">axes_options</span><span class="o">=</span><span class="n">axes_options</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">x_ticker</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">y_ticker</span><span class="p">)</span>

<span class="c1"># 1. create a callback which updates the plot when dropdown item is selected</span>
<span class="k">def</span> <span class="nf">update_scatter</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">x_ticker</span> <span class="o">=</span> <span class="n">x_dropdown</span><span class="o">.</span><span class="n">value</span>
    <span class="n">y_ticker</span> <span class="o">=</span> <span class="n">y_dropdown</span><span class="o">.</span><span class="n">value</span>

    <span class="c1"># update the x and y attributes of the mark by selecting</span>
    <span class="c1"># the column from the price data frame</span>
    <span class="k">with</span> <span class="n">scatter</span><span class="o">.</span><span class="n">hold_sync</span><span class="p">():</span>
        <span class="n">scatter</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="n">x_ticker</span><span class="p">]</span>
        <span class="n">scatter</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="n">y_ticker</span><span class="p">]</span>

    <span class="c1"># update the title of the figure</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">x_ticker</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">y_ticker</span><span class="p">)</span>


<span class="c1"># 2. register the callback by using the &#39;observe&#39; method</span>
<span class="n">x_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_scatter</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
<span class="n">y_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_scatter</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

<span class="c1"># stack the dropdown and fig widgets using VBox</span>
<span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">([</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">x_dropdown</span><span class="p">,</span> <span class="n">y_dropdown</span><span class="p">]),</span> <span class="n">fig3</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    



  <div class="output_subarea output_widget_view ">
    <button class="js-nbinteract-widget">
      Loading widgets...
    </button>
  </div>

</div>

</div>
</div>

  </div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In the example below, we'll look at plots of trigonometic functions</p>

</div>
</div>
</div>

  

  <div class="
      cell border-box-sizing code_cell rendered">
    <div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">funcs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">sin</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">,</span> <span class="n">cos</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">,</span> <span class="n">tan</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">,</span> <span class="n">sinh</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sinh</span><span class="p">,</span> <span class="n">tanh</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">)</span>
<span class="n">dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">funcs</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Function&quot;</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;sin(x)&quot;</span><span class="p">,</span> <span class="n">animation_duration</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># create x and y data attributes for the line chart</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">line</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">update_line</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">dropdown</span><span class="o">.</span><span class="n">value</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">f</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(x)&quot;</span>
    <span class="n">line</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>


<span class="n">dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_line</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

<span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">([</span><span class="n">dropdown</span><span class="p">,</span> <span class="n">fig</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    



  <div class="output_subarea output_widget_view ">
    <button class="js-nbinteract-widget">
      Loading widgets...
    </button>
  </div>

</div>

</div>
</div>

  </div>

