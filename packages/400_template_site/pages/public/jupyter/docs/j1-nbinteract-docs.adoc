---
title:                                  J1 NbInteract
tagline:                                nbi integration
date:                                   2022-04-17 00:00:00
description: >
                                        Things you should know about this site,
                                        the people and the software and/or
                                        services provided.

categories:                             [ J1, Integration ]
tags:                                   [ NbInteract ]

scrollbar:                              false
fab_menu_id:                            page_ctrl_simple
personalization:                        true

permalink:                              /pages/public/jupyter/docs/j1-nbinteract-docs/
regenerate:                             true

resources:                              [ animate, clipboard, lightbox, nbinteract, rouge ]
resource_options:
  - attic:
      padding_top:                      400
      padding_bottom:                   50
      opacity:                          0.5
      slides:
        - url:                          /assets/images/modules/attics/kirklai-1920x1280.jpg
          alt:                          Photo by ùì¥ùìòùì°ùìö ùïùùî∏ùïÄ on Unsplash
          badge:
            type:                       unsplash
            author:                     ùì¥ùìòùì°ùìö ùïùùî∏ùïÄ
            href:                       https://unsplash.com/@kirklai
---

// Page Initializer
// =============================================================================
// Enable the Liquid Preprocessor
:page-liquid:

// Set (local) page attributes here
// -----------------------------------------------------------------------------
// :page--attr:                         <attr-value>
:binder-badge-enabled:                  false

//  Load Liquid procedures
// -----------------------------------------------------------------------------
{% capture load_attributes %}themes/{{site.template.name}}/procedures/global/attributes_loader.proc{%endcapture%}

// Load page attributes
// -----------------------------------------------------------------------------
{% include {{load_attributes}} scope="all" %}


// Page content
// ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ifeval::[{binder-badge-enabled} == true]
image:/assets/images/badges/myBinder.png[[Binder, link="https://mybinder.org/", {browser-window--new}]
image:/assets/images/badges/docsBinder.png[[Binder, link="https://mybinder.readthedocs.io/en/latest/", {browser-window--new}]
endif::[]

// Include sub-documents (if any)
// -----------------------------------------------------------------------------

// tut:         https://www.dataquest.io/blog/jupyter-notebook-tutorial/
// tut:         https://reproducible-science-curriculum.github.io/publication-RR-Jupyter/01-documentation/index.html

// integration: https://code.visualstudio.com/docs/datascience/jupyter-notebooks
// intro:       https://jupyter-notebook-beginner-guide.readthedocs.io/en/latest/index.html
// Books:       https://jupyterbook.org/intro.html
// 2HTML:       https://stackoverflow.com/questions/35896866/how-to-export-current-notebook-in-html-on-jupyter

// info:        https://en.wikipedia.org/wiki/Galileo_Galilei

The Template system J1 integrates the Javascript (core) library
`nbinteract-core.js` from NBI (nbinteract). The integration is a J1 module
that requires *no* programming to ntegrate *interactive* Jupyter Notebooks
(for the programming language *Python*) in your webpages.

WARNING: The (core) library integrated with J1 can only be used with the
Template System J1. The library `nbinteract-core` is modified for the use
with J1, allowing seamless communication between NBI and the pages of a J1 Web.

The integration of NBI consists of the following components:

* the (modified) JS and CSS files of nbinteract-core` specified as resource
  record `nbinteract` (~/_data/`resources.yml`)
* an J1 adapter `nbinteract.js` for integration
* a module configuration `notebooks.yml`
* an Asciidoc Extension `notebook::` to integrate notebooks (in webpages)

The built-in *Starter Web* of the template comes with a suitable J1 NBI
configuration and documents for testing. You can find examples of interactive
notebooks under the *Learn* menu underneath the submenu
*Experimental|Textbooks*.

WARNING: To develop your Jupyter Notebooks, a *local* installation of the
*Python* programming language is required. For the development of notebooks,
the *Jupyter* package and the installation of the library *nbinteract* are
expected.

== J1 NBI Integration

Das Modul zur J1 NBI Integration steht als stabile Version zur Verf√ºgung,
ist jedoch noch im Status *Experimentell*. Wesentlicher Grund f√ºr den
experimentellen Status ist das *Alter* der der zu Grunde liegenden Library
`nbinteract-core`.

NOTE: Aktuelle Updates der Library sind l√§nger als ein Jahr her und die
aktuelle Version von Jupyter Notebook (JupyterLab) wird leider (noch)
nicht unterst√ºtzt.


=== Module configuration

Wie bein allen Modulen die mit J1 zur Verf√ºgung stehen ist  *keine*
Programmierung erforderlich. Ein Adapter f√ºr J1 √ºbernimmt die Integration,
dass mit Hilfe der Module Konfiguration ein einfaches Einbinden in Ihre
Webseiten erlaubt.


==== Default settings

[cols="3a,4a,5a", subs=+macros, options="header", width="100%", role="rtable mt-3"]
|===
|Paramter |Value |Description

|`spec`
|`<user>/<repo>/<branch>`
|Defines the *public* repo the configuration data is available to be read
by the *Binder* service.

|`baseUrl`
|`https://mybinder.org`
|Base URL of the *Binder* service.

|`provider`
|gh\|gist\|gl
|Provider of the *public* repo. +
`gh`, GitHub +
`gist`, GitHub Gist +
`gl`, GitLab

|`button_styles`
|CSS styles
|For *Bootstrap*, styles like `btn btn-primary btn-raised ` can be used.

|`show_nbi_messages`
|`true`\|`false`
|Show info\|progress\|error messages while nbinteract is being initialized.
Messges are shown in (Bootstrap) modals. +
Default: `false`

|`indicate_nbi_activity`
|`true`\|`false`
|Show a spinner while nbinteract in being initialized.
Default: `true`

|`nbi_messages_auto_close`
|`true`\|`false`
|Close the nbi messages modals automatically. +
Default: `true`

|`nbi_init_timeout`
|`integer`
|Time (ms) notebooks on a page are to be finally initialized. If the
init phase tooks longer, an error is issued. +
Default: `180000` (3 min)

|`nbi_messages_auto_close_delay`
|`integer`
|Delay (ms) to auto-close nbi messages modal. +
Default: `3500` (3.5 sec)

|`nbi_init_mathjax`
|`true`\|`false`
|Load and initialize the MathJax JS library. +
Default: `false`

|===

WARNING: In the current implementation of NBI for J1, the JS library *MathJax*
interferes with the formatting output of other pages of a J1 website. The
formatting done by MatJax may result in strange outcomes for the other content.
For that reason, the MathJax library is *disabled* for the time being.

[source, yaml]
----
# ------------------------------------------------------------------------------
# Default settings
#
defaults:

  spec:                                 jekyll-one/nbinteract-notebooks/main
  baseUrl:                              'https://mybinder.org'
  provider:                             gh

  button_styles:                        btn btn-primary btn-raised hidden

  show_nbi_messages:                    false
  indicate_nbi_activity:                true
  nbi_messages_auto_close:              true

  nbi_init_timeout:                     180000
  nbi_messages_auto_close_delay:        3500

  nbi_init_mathjax:                     false
----

==== Notebook settings

[cols="3a,4a,5a", options="header", width="100%", role="rtable mt-3"]
|===
|Paramter |Value |Description

|`enabled`
|`true`\|`false`
|Enables\|Disables the use of a notebook. If disabled, *no* J1 adapter
setting are generated for this Jupyter Notebook. +
Default: `true`

|`id`
|`string`
|The id of a notebook that is used by the *Asciidoc Extension*
`notebook::<id>[]` to place the HTML portion for the HTML code
of an exported Jupyter Notebook. +
Default: `no default`

|`xhr_data`
|`string`
|The name of the exported HTML data file of a Jupyter Notebook. +
Default: `no default`

|`xhr_data_path`
|`path`
|The (data) path the Jupyter Notebook is exported. +
Default: `no default`
|===

.Settings for the starter web
[source, yaml]
----
# ------------------------------------------------------------------------------
# User configuration settings
#
settings:

  notebooks:

    # --------------------------------------------------------------------------
    # J1 Notebooks J1 NBI Docs
    # --------------------------------------------------------------------------

    # --------------------------------------------------------------------------
    # Demo notebook 'selected ODEs'
    #
    - notebook:
        enabled:                        true

        id:                             j1_docs_example_dynamic
        xhr_data:                       j1_docs_example_dynamic.html
        xhr_data_path:                  /pages/public/jupyter/notebooks/html
----

=== Binder configuration

lorem:sentences[5]

=== Notebook configuration

lorem:sentences[5]

=== Integrate notebooks with pages

Das Modul zur J1 NBI Integration ...

Die ID des Moduls der J1 NBI Integration ist `nbinteract`. F√ºr alle Webseiten
die dynamische Jupyter Notebooks einbinden, ist als Resource das Modul
einzubinden

.Frontmatter settings
[source, yaml, role="noclip"]

----
resources:                              [ nbinteract ]
----

lorem:sentences[5]

== Backgrounds

lorem:sentences[5]

=== Jupyter

Das Jupyter Projekt ist eine Non-Profit-Organisation, gegr√ºndet im Jahr 2014
von *Fernando P√©rez*. Das Projekt Jupyter unterst√ºtzt interaktive wissenschaftliche
Datenauswertungen und wissenschaftliche Berechnungen.

Der Name Jupyter bezieht sich auf die drei wesentlichen Programmiersprachen
Julia, Python und R die von der Anwendung <<Jupyter Notebook App>> unterst√ºtzt
werden. Die Bezeichnung *Jupyter* ist eine Hommage an die *Notizbucheintr√§ge*
von Galileo Galilei zur Entdeckung der Jupitermonde, bei denen er seine
Beobachtungen und die Messdaten zusammen aufgeschrieben hatte.

==== Jupyter Notebook App

Die App *Jupyter Notebook* ist eine Server-Client-Anwendung, mit der
Notebook-Dokumente √ºber einen Webbrowser bearbeitet und ausgef√ºhrt werden
k√∂nnen. Jupyter Notebook  kann auf einem lokalen Desktop ausgef√ºhrt
werden der keinen Internetzugang erfordert. Alternativ kann die Anwendung auf
einem Remote-Server installiert und √ºber das Internet aufgerufen werden, die
dann *keine* Installation erforderlich macht.

==== Notebook documents

Notebook-Dokumente (oder kurz: *notebooks*) sind Dokumente, die von der Notebook
App erstellt wurden und sowohl Computercode (z. B. Python) als auch Rich-Text
Elemente (Abs√§tze, Gleichungen, Abbildungen, Links usw.) enthalten k√∂nnen.
Notebook Dokumente sind menschenlesbare Dokumente, die neben Code Beschreibungen
und deren Ergebnisse (Abbildungen, Tabellen usw.) enthalten.

==== Kernels

Ein Notebook Kernel ist ganz allgemein eine *Rechenmaschine*, die den in einem
Notebook-Dokument enthaltenen Code ausf√ºhrt. Der *Ipython* Kernel, der f√ºr die
NBI Integration verwendet wird, f√ºhrt Python-Code aus erzeugt die Ergebnisse.

=== nbinteract

Der Name der Library `nbinteract` deutet zwei generelle Funktionen f√ºr
Jupyter Notebooks  an:

notebook::
Verarbeitung von Notebooks
// (als HTML Darstellung)

interaction::
Ausf√ºhren von Notebooks in Zusammenarbeit mit einem (remoten) Verarbeitungs
System und Darstellung der Ergebnisse


==== Requirements

F√ºr die Entwicklung eigener Jupyter Notebooks ist eine *lokale*
Installation der Programmiersprache *Python* erforderlich. Zur Entwicklung
von Notebooks wird zus√§tzlich das Paket *Jupyter* sowie die Installation der
Python Library *nbinteract* erwartet.

==== Widgets

Ein Widget ist ein Element einer grafischen Benutzeroberfl√§che (GUI), das
Informationen anzeigt oder einem Benutzer eine bestimmte M√∂glichkeit bietet,
mit dem Betriebssystem oder einer Anwendung zu interagieren.

Zu den Widgets geh√∂ren Symbole, Pulldown-Men√ºs, Schaltfl√§chen, Auswahlfelder,
Fortschrittsanzeigen, Ein-Aus-H√§kchen, Bildlaufleisten, Fenster, Fensterr√§nder
(mit denen Sie die Gr√∂√üe des Fensters √§ndern k√∂nnen), Umschaltfl√§chen,
Formulare und viele andere Ger√§te zum Anzeigen von Informationen und zum
Einladen, Akzeptieren und Reagieren auf Benutzeraktionen.


==== BinderHub

// UserGuide: https://mybinder.readthedocs.io/en/latest/about/about.html

Mit Binder (myBinder) k√∂nnen Sie benutzerdefinierte (virtuelle) Computerumgebungen
erstellen, die von vielen Benutzern remote aus einer Cloud gemeinsam genutzt
werden k√∂nnen.

// erzeugt Docker Container
// installiert Python Software
// installiert Jupyter Lab als Notebook App

.Binderhub Architecture
lightbox::binderhub--architecture[ 800, {data-binderhub--architecture}, role="mt-3 mb-4" ]

////
Ein Binder-Dienst wird von BinderHub
unterst√ºtzt, einem Open-Source-Tool, das auf Kubernetes ausgef√ºhrt wird,
einer tragbaren, erweiterbaren Open-Source-Plattform zum Verwalten von
containerisierten Diensten. Eine solche Bereitstellung befindet sich auf
mybinder.org und kann kostenlos verwendet werden.
////

==== JupyterHub

JupyterHub bringt die Leistung von Notebooks f√ºr Benutzergruppen. Es gibt
Benutzern Zugriff auf Rechenumgebungen und Ressourcen, ohne die Benutzer mit
Installations- und Wartungsaufgaben zu belasten. Benutzer, einschlie√ülich
Studenten, Forscher und Datenwissenschaftler, k√∂nnen ihre Arbeit in ihren
eigenen Arbeitsbereichen auf gemeinsam genutzten Ressourcen erledigen, die
von Systemadministratoren effizient verwaltet werden k√∂nnen.

.JupyterLab Architecture
lightbox::jupyterlab--architecture[ 800, {data-jupyterlab--architecture}, role="mt-3 mb-4" ]

JupyterHub l√§uft in der Cloud oder auf Ihrer eigenen Hardware und erm√∂glicht
es, jedem Benutzer weltweit eine vorkonfigurierte Data-Science-Umgebung
bereitzustellen. Es ist anpassbar und skalierbar und eignet sich f√ºr kleine
und gro√üe Teams, akademische Kurse und gro√üe Infrastrukturen.

== Textbook Examples

For the J1 template, textbooks are typically integrated as *dynamic* HTML
pages. In addition to the dynamic pages, notebooks can also be integrated as
*static* HTML code. You can find examples for both variants in the following
sections.

=== Static Textbook

The `nbconvert` tool converts Jupyter notebooks to various other formats via
Jinja templates. The tool allows you to convert an .ipynb notebook file into
various *static* formats. For more details, refer to
link:{url-nbconvert--doc}[nbconvert - usage, {browser-window--new}].

.Generate a static notebook
[source, bash]
----
jupyter nbconvert --execute --to html <full_path_to>/<notebook.ipynb>
----

Below you find an static HTML output (Textbook) generated via `nbconvert`.

include::{documentdir}/j1_ode_selected_static.asciidoc[]

=== Dynamic Textbook

*Dynamic* Textbooks are generated using `nbinteract`:

.Generate a dynamic notebook (J1 Version)
[source, bash]
----
nbinteract <full_path_to>/<notebook.ipynb> -t plain -s fake/fake
----

notebook::j1_docs_example_dynamic[]

=== Conclusion

Compare both textbook versions, dynamic versus static, in terms of
*interactivity*. Again, check the _Evaluation_ section at the
<<Dynamic Textbook>>.
